{% extends 'base.html' %}
{% block content %}
  <h1>Welcome to {{ config.APP_NAME }}</h1>
  {% if msg %}
    <p style="color: green;">{{ msg }}</p>
  {% endif %}
  {% if err %}
    <p style="color: red;">{{ err }}</p>
  {% endif %}
  <h2>Create account</h2>
  <form method="POST" action="{{ url_for('register') }}" onsubmit="trimFormInputs()">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required>
    <label for="captcha">CAPTCHA: {{ captcha_q }} = </label>
    <input type="text" id="captcha" name="captcha" required>
    <button type="submit">Register</button>
  </form>
  <h2>Login</h2>
  <form method="POST" action="{{ url_for('login') }}" onsubmit="trimFormInputs()">
    <label for="login_email">Email:</label>
    <input type="email" id="login_email" name="email" required>
    <label for="login_password">Password:</label>
    <input type="password" id="login_password" name="password" required>
    <button type="submit">Login</button>
  </form>
  <p>
    <a href="{{ url_for('forgot_password') }}">Forgot password?</a> Â· 
    <a href="{{ url_for('admin') }}">Admin</a>
  </p>
  {% block scripts %}
    <script>
      function trimFormInputs() {
        document.querySelectorAll('input').forEach(input => {
          input.value = input.value.trim();
        });
      }
    </script>
  {% endblock %}
{% endblock %}
