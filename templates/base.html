<!DOCTYPE html>
<html>
<head>
  <title>{{ config.APP_NAME }}</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      margin: 40px; 
      transition: all 0.3s ease; 
    }
    .success { color: green; }
    .error { color: red; }
    /* Light theme (default) */
    body.light {
      background: #fff;
      color: #333;
    }
    /* Dark theme */
    body.dark {
      background: #333;
      color: #fff;
    }
    button, input, select {
      padding: 8px;
      margin: 5px;
    }
    a { color: #007bff; }
    a:hover { color: #0056b3; }
    /* Theme toggle button */
    #theme-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body class="{{ session.theme | default('light') }}">
  <button id="theme-toggle">Toggle Theme</button>
  {% block content %}
  {% endblock %}
  {% block scripts %}
  <script>
    document.getElementById('theme-toggle').addEventListener('click', () => {
      const body = document.body;
      const isDark = body.classList.contains('dark');
      body.classList.toggle('dark');
      body.classList.toggle('light');
      fetch('/set_theme', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ theme: isDark ? 'light' : 'dark' })
      }).catch(error => console.error('Theme save failed:', error));
    });
    // Apply saved theme
    const savedTheme = '{{ session.theme | default('light') }}';
    document.body.classList.add(savedTheme);
  </script>
  {% endblock %}
</body>
</html>
